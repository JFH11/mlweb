const urlParams = new URLSearchParams(window.location.search);
const produkTarget = decodeURIComponent(urlParams.get('produk'));

const data = [
    {
        namaProduk: 'Wush Club 16S Boxy Fit Heavyweight Tee',
        terjual: '1 rb+',
        rating: '⭐ 4.6 (569 Rating)',
        hargaProduk: 'Rp 64.000',
        hargaAngka: 64000,
        stokProduk: '2367',
        gambarProduk: [
            'Wush Club.webp',
            'Wush Club Biru.webp',
            'Wush Club Putih.webp',
            'Wush Club Coklat.webp',
        ],
        warna: ['Hitam', 'Biru', 'Putih', 'Coklat'],
        ukuran: ['S', 'M', 'L', 'XL'],
        kondisiProduk: 'Baru',
        deskripsiProduk:
            `
    MOHON BACA SIZE CHART SEBELUM CHECKOUT
    Material Cotton Combad 16S HEAVYWEIGHT BOXY TEE
    Printing 100% cotton
    <br><br>
    Size Chart :
    <br>
    M : LEBAR 54cm x Panjang 66 cm (lengan 22cm )<br>
    L : Lebar 56cm x Panjang 68cm (lengan 23cm )<br>
    XL : Lebar 58cm x Panjang 70cm (lengan 23cm )<br>
    Toleransi 1cm
    -Jahitan rapih Pemesanan untuk di di kirim di hari yang sama maximal jam 16.00 Pemesanan Minggu dan Libur nasional akan di kirim di hari berikut nya.
    <br><br>

    SANGAT NYAMAN DI PAKAI
    BOXY FIT TREND TERKINI
    AYOO BURUAN CHECKOUT
    JANGAN SAMPAI KEHABISAN
    OKKKK`,
        namaCheckout: 'Wush Club 16S Boxy Fit Heavyweight Tee',
    },

    {
        namaProduk: 'Infinide T-Shirt Kaos Polos BIG OVERSIZE',
        terjual: '2.3 rb+',
        rating: '⭐ 4.9 (1.2 rb+ Rating)',
        hargaProduk: 'Rp 50.000',
        hargaAngka: 50000,
        stokProduk: '4502',
        gambarProduk: [
            'Infinide T-Shirt.webp',
            'Infinide T-Shirt Putih.webp',
            'Infinide T-Shirt Hitam.webp',
        ],
        warna: ['Cream', 'Putih', 'Hitam'],
        ukuran: ['S', 'M', 'L', 'XL', '2XL'],
        kondisiProduk: 'Baru',
        deskripsiProduk:
            `
    BIG OVERSIZE Official Infinide Plain T-Shirt
Tshirt Cotton Combed 24s Premium
<br>
QC PASS
<br><br>

Size Chart :
<br>
S 49cm X 68cm X 25cm<br>
M 53cm X 70cm X 26cm<br>
L 57cm X 72cm X 27cm<br>
XL 61cm X 74cm X 28cm<br>
2XL 65cm X 76cm X 29cm<br>
KET Chest Width X Shirt Length X Hand Length`,
        namaCheckout: 'Infinide T-Shirt Kaos Polos BIG OVERSIZE',
    },

    {
        namaProduk: 'POLOS BOXY FIT OVERSIZE T SHIRT',
        terjual: '1.7 rb+',
        rating: '⭐ 4.6 (821 Rating)',
        hargaProduk: 'Rp 54.000',
        hargaAngka: 54000,
        stokProduk: '2437',
        gambarProduk: [
            'POLOS BOXY FIT Hitam.webp',
            'POLOS BOXY FIT Putih.webp',
            'POLOS BOXY FIT Sage.webp',
            'POLOS BOXY FIT Ungu.webp',
        ],
        warna: ['Hitam', 'Putih', 'Sage', 'Ungu'],
        ukuran: ['M', 'L', 'XL'],
        kondisiProduk: 'Baru',
        deskripsiProduk:
            `
    MOHON BACA SIZE CHART SEBELUM CHECKOUT<br>
Material Cotton Combad 24s<br>
Printing dtf<br>
100% cotton<br><br>
Size Chart :<br>
M : LEBAR 54cm x Panjang 66 cm (lengan 22cm )<br>
L : Lebar 56cm x Panjang 68cm (lengan 23cm )<br>
XL : Lebar 58cm x Panjang 70cm (lengan 23cm )<br><br>


Toleransi 1cm<br>
-Jahitan rapih<br><br>


Pemesanan untuk di di kirim di hari yang sama maximal jam 16.00 Pemesanan Minggu dan Libur nasional akan di kirim di hari berikut nya.
<br><br>
Pakaian kaos dengan desain BOXY FIT OVERSIZE cocok untuk semua musim! Bahan cotton combad 24s berkualitas membuat kaos ini terasa tebal dan nyaman dipakai. Dengan pas longgar dan kerah Kaos Oblong yang simpel, kamu bisa menggunakannya untuk berbagai kegiatan kasual. Model Dasar dengan pola Polos membuat tampilanmu simpel tapi tetap keren! Kaos ini memiliki panjang lengan pendek dan panjang pakaian pendek, sehingga sangat cocok digunakan saat cuaca sedang panas atau ketika sedang ingin tampil santai. Meskipun terbuat dari bahan berkualitas, kamu harus mencuci baju ini dengan tangan agar tetap awet. Dalam satu kemasan tersedia BOXY FIT OVERSIZE T SHIRT yang bisa kamu dapatkan dalam ukuran Big & Tall!`,
        namaCheckout: 'POLOS BOXY FIT OVERSIZE T SHIRT',
    },

    {
        namaProduk: 'Okechuku SAM Celana Panjang Pria Loose Pants',
        terjual: '1.1 rb+',
        rating: '⭐ 4.3 (212 Rating)',
        hargaProduk: 'Rp 125.000',
        hargaAngka: 125000,
        stokProduk: '846',
        gambarProduk: [
            'Okechuku SAM Abu Tua.webp',
            'Okechuku SAM Hitam.webp',
            'Okechuku SAM Krem.webp',
        ],
        warna: ['Abu Tua', 'Hitam', 'Krem'],
        ukuran: ['S/M', 'L/XL', 'XXL/3L'],
        kondisiProduk: 'Baru',
        deskripsiProduk:
            `
    Okechuku SAM Celana Panjang Pria Loose Pants Baggy Pants Pria Celana Longgar Pria<br>

Material : Baby Canvas (tidak stretch)<br><br>

Celana panjang model LOOSE PANTS. Model simple, basic, dan polos. Ujung kaki bawah tanpa karet. Cocok untuk dipakai segala macam aktivitas,baik untuk hangout, nongkrong, kuliah, kerja, maupun acara semiformal lainnya.<br><br>

Terdapat kantong depan di kiri dan kanan serta di belakang kiri dan kanan. Pinggang terbuat dari karet dan dilengkapi dengan tali. Pola / pattern dibuat unisex sehingga bisa dipakai pria maupun wanita.<br><br>

Detail ukuran :<br><br>
1. S/M (S fit to M estimasi BB 50-65kg) :<br>

Lingkar pinggang : 68 fit to 78cm<br>
Panjang : 96cm<br>
Lingkar paha : 64cm<br>
Lingkar pinggul : 104cm<br>
Pesak : 33cm<br>
Lebar kaki bawah : 24cm<br><br>

2. L/XL (L fit to XL estimasi BB 66-80kg) :<br>

Lingkar pinggang : 72 fit to 82cm<br>
Panjang : 96cm<br>
Lingkar paha : 66cm<br>
Lingkar pinggul : 106cm<br>
Pesak : 34cm<br>
Lebar kaki bawah : 25cm<br><br>

3. XXL/3L (XXL fit to 3L estimasi BB 81-90kg) :<br>
Lingkar pinggang : 80 fit to 100cm<br>
Panjang : 99cm<br>
Lingkar paha : 72cm<br>
Lingkar pinggul : 120cm<br>
Pesak : 37cm<br>
Lebar kaki bawah : 28cm<br><br>

(Toleransi ukuran +/- 1-2cm karena proses potong dan jahit)<br>
Tinggi badan model di foto 159cm dan berat badan model 50kg (on model size S/M).<br><br>

Pembeli harap memperhatikan dan mempertimbangkan detail ukuran di atas sebelum membeli.<br>
Foto produk 100% ASLI / REAL PICTURE, namun ada kemungkinan perbedaan warna sedikit di karenakan efek resolusi layar dan pencahayaan.<br><br>

Jam kerja :<br>
Senin - Sabtu<br>
08.00 - 16.00 WIB<br>
Fast respon pada jam kerja, pemesanan dan pertanyaan di luar jam kerja akan diproses keesokan harinya.<br><br>

BUDAYAKAN MEMBACA SEBELUM MEMBELI<br>
*) Wajib mendokumentasikan saat membuka paket dalam bentuk video untuk berjaga-jaga jika ada barang yang tidak sesuai /rusak/cacat sebagai syarat retur di toko kami<br>
*) Jika ada kesalahan dalam pengiriman, cacat, atau pembeli tidak puas, silahkan diskusikan terlebih dahulu via chat. Setiap masalah pasti ada solusinya jika dibicarakan dengan baik<br>
*) Jika anda memutuskan untuk MEMBELI maka kami anggap anda SETUJU dengan aturan di atas<br><br>
MENERIMA PESANAN DALAM JUMLAH BANYAK (untuk seragam sekolah, kaos acara kantor/perusahaan). Kami juga menerima pesanan special order (desain custom / sesuai permintaan customer). Untuk info lebih lanjut, dapat langsung menghubungi admin melalui fitur chat. Happy shopping dan terima kasih.`,
        namaCheckout: 'Okechuku Celana Panjang Pria Loose Pants',
    },

    {
        namaProduk: 'Madless Celana Pendek Pria Hitam | Shorts',
        terjual: '969',
        rating: '⭐ 4.6 (136 Rating)',
        hargaProduk: 'Rp 67.000',
        hargaAngka: 67000,
        stokProduk: '1648',
        gambarProduk: [
            'Madless Celana Pendek Hitam.webp',
            'Madless Celana Pendek Putih.webp',
            'Madless Celana Pendek Krem.webp',
        ],
        warna: ['Hitam'],
        ukuran: ['M', 'L', 'XL', 'XXL', '3XL'],
        kondisiProduk: 'Baru',
        deskripsiProduk:
            `
    Material : TERRY KATUN BLEND<br><br>

Stock : M L XL XXL<br><br>

Size chart : Gambar slide ke-3<br><br>

note: Toleransi penyusutan bahan 1-2cm<br>
"DISARANKAN UNTUK TANYAKAN SIZE TERLEBIH DAHULU SEBELUM CHECK OUT"<br><br>

note: Bilamana ada kendala apapun perihal barang yang diterima, mohon segera chat admin, kami pastikan fast respon.<br><br>

- terima kasih -<br>
#short #shortpants #celana #celanapendek`,
        namaCheckout: 'Madless Celana Pendek Pria Hitam | Shorts',
    },

    {
        namaProduk: 'FortKlass Kaos SPORTY Regular Fit Kaos Sablon 24S 30S',
        terjual: '1.4 rb+',
        rating: '⭐ 4.2 (314 Rating)',
        hargaProduk: 'Rp 60.000',
        hargaAngka: 60000,
        stokProduk: '1200',
        gambarProduk: [
            'FortKlass Kaos SPORTY Regular Fit Hitam.webp',
            'FortKlass Kaos SPORTY Regular Fit Putih.webp',
            'FortKlass Kaos SPORTY Regular Fit Navy.webp',
        ],
        warna: ['Hitam', 'Putih', 'Navy'],
        ukuran: ['M', 'L', 'XL'],
        kondisiProduk: 'Baru',
        deskripsiProduk:
            `
    Model : O neck short sleeve<br><br>
- Pola : Reguler Fit<br>
- Gender : Unisex<br>
- Bahan Kain : 100% cotton combed 24s dan 30s<br><br>
*PERBANDINGAN 24S DAN 30S BAHAN LEBIH TEBAL 24S DIBANDING 30S*<br>
- Handfeel : Supersoft<br><br>
Size Chart:<br>
M: Lebar Dada 48cm, Panjang 67cm, P.Lengan 20cm<br>
L: Lebar Dada 50cm, Panjang 69cm, P.Lengan 21cm<br>
XL: Lebar Dada 52cm, Panjang 71cm, P.Lengan 22cm`,
        namaCheckout: 'FortKlass Kaos SPORTY Regular Fit Kaos Sablon 24S 30S',
    },

    {
        namaProduk: 'Nathalie Short Pants Wanita Ice Silk',
        terjual: '1.3 rb+',
        rating: '⭐ 4.8 (516 Rating)',
        hargaProduk: 'Rp 46.000',
        hargaAngka: 46000,
        stokProduk: '571',
        gambarProduk: [
            'Nathalie Short Pants Wanita Ice Silk Pink.webp',
            'Nathalie Short Pants Wanita Ice Silk Onyx.webp',
            'Nathalie Short Pants Wanita Ice Silk Marble.webp',
        ],
        warna: ['Pink', 'Onyx', 'Marble'],
        ukuran: ['M', 'L', 'XL'],
        kondisiProduk: 'Baru',
        deskripsiProduk:
            `
    Nathalie Short Pants Wanita Ice Silk Celana Ketat Strit Cewek Nylon 1 Pcs NTC 3439<br><br>

Celana Pendek wanita ini diproduksi sebagai solusi untuk para wanita agar bisa bebas beraktivitas seharian tanpa khawatir<br>
Flyman Nathalie memproduksi Celana pendek Perempuan dengan kelebihan :<br><br>

- Ice silk fabric, Celana pendek Wanita ini akan terasa dingin dan sejuk saat digunakan sehingga tidak mudah panas atau kegerahan.<br>
- Quick Dry, short pants wanita ini cepat kering, sangat cocok digunakan pada saat santai atau kegiatan lainnya<br>
- Soft & Comfortable, bahan yang sangat nyaman memiliki Pengaturan suhu stabil,sehingga tidak adanya kelembaban dan mudah menyerap keringat dengan baik.<br>
- 4 Way Stretch, Celana santai wanita Pendek ini elastis dan tidak kaku, jadi sangat nyaman digunakan<br>
- Tagless Design, short pants cewek ini tidak ada tagging menempel dikulit, sehingga sangat nyaman digunakan tidak gatal.<br>
- No Roll Waistband, Karet pada bagian pinggang dibuat sangat nyaman dan pakem sehingga tidak slip.`,
        namaCheckout: 'Nathalie Short Pants Wanita Ice Silk',
    },

];

const produk = data.find(item => item.namaProduk === produkTarget);

let jumlah = 1;
let hargaAngka = produk?.hargaAngka || 0;
let warnaTerpilih = produk?.warna[0] || '-';
let ukuranTerpilih = produk?.ukuran[0] || '-';

function formatRupiah(angka) {
    return "Rp " + angka.toLocaleString("id-ID");
}

function updateSubtotal() {
    const subtotal = jumlah * hargaAngka;
    document.querySelector('.subtotal .price').textContent = formatRupiah(subtotal);
}

if (produk) {
    document.getElementById('nama_produk').textContent = produk.namaProduk;
    document.getElementById('terjual').textContent = produk.terjual;
    document.getElementById('rating').textContent = produk.rating;
    document.getElementById('harga').textContent = produk.hargaProduk;
    document.getElementById('deskripsi_produk').innerHTML = "<strong>Deskripsi:</strong> " + produk.deskripsiProduk;
    document.querySelector('.kondisi').innerHTML = "<strong>Kondisi:</strong> " + produk.kondisiProduk;
    document.getElementById('nama_checkout').textContent = produk.namaCheckout;
    document.getElementById('stok_produk').textContent = produk.stokProduk;

    const mainImg = document.getElementById('gambar_utama');
    mainImg.src = 'img/product/' + produk.gambarProduk[0];

    // utk thumbnail/gambar kecil
    const thumbnailContainer = document.getElementById('thumbnail');
    thumbnailContainer.innerHTML = '';
    produk.gambarProduk.forEach((src, index) => {
        const img = document.createElement('img');
        img.src = 'img/product/' + src;
        img.classList.add('thumb');
        if (index === 0) img.classList.add('active');

        img.addEventListener('click', () => {
            mainImg.src = img.src;
            document.querySelectorAll('#thumbnail img').forEach(el => el.classList.remove('active'));
            img.classList.add('active');
        });

        thumbnailContainer.appendChild(img);
    });

    // utk warna
    const warnaContainer = document.querySelector('.con-warna');
    warnaContainer.innerHTML = '';
    produk.warna.forEach((warna, index) => {
        const btn = document.createElement('button');
        btn.classList.add('warna');
        btn.type = 'button';

        const img = document.createElement('img');
        img.src = 'img/product/' + produk.gambarProduk[index];
        img.alt = warna;

        btn.appendChild(img);
        btn.appendChild(document.createTextNode('' + warna));

        btn.addEventListener('click', () => {
            warnaTerpilih = warna;
            const newSrc = img.src;

            mainImg.src = newSrc;
            document.querySelector('.con-checkout-img img').src = newSrc;
            document.querySelector('.checkout-warna').innerHTML = "<strong>Warna:</strong> " + warna;

            // utk warna checkout
            document.querySelectorAll('.warna').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // utk warna thumbnail
            const thumbs = document.querySelectorAll('#thumbnail img');
            thumbs.forEach(thumb => {
                thumb.classList.remove('active');
                if (thumb.src === newSrc) thumb.classList.add('active');
            });
        });

        warnaContainer.appendChild(btn);
    });

    // utk ukuran
    const ukuranContainer = document.getElementById('ukuranContainer');
    ukuranContainer.innerHTML = '';
    produk.ukuran.forEach(size => {
        const btn = document.createElement('button');
        btn.classList.add('ukuran');
        btn.type = 'button';
        btn.textContent = size;

        btn.addEventListener('click', () => {
            ukuranTerpilih = size;
            document.querySelector('.checkout-ukuran').innerHTML = "<strong>Ukuran:</strong> " + size;
            document.querySelectorAll('.ukuran').forEach(u => u.classList.remove('active'));
            btn.classList.add('active');
        });

        ukuranContainer.appendChild(btn);
    });

    // utk checkout
    document.querySelector('.con-checkout-img img').src = 'img/product/' + produk.gambarProduk[0];
    document.querySelector('.checkout-warna').innerHTML = '<strong>Warna:</strong> ' + warnaTerpilih;
    document.querySelector('.checkout-ukuran').innerHTML = '<strong>Ukuran:</strong> ' + ukuranTerpilih;
    updateSubtotal();
} else {
    document.getElementById('nama_produk').textContent = 'Produk tidak ditemukan.';
}

// utk penjumlahan
document.querySelector('.plus').addEventListener('click', () => {
    jumlah++;
    document.querySelector('.angka').textContent = jumlah;
    updateSubtotal();
});

document.querySelector('.minus').addEventListener('click', () => {
    if (jumlah > 1) {
        jumlah--;
        document.querySelector('.angka').textContent = jumlah;
        updateSubtotal();
    }
});

// Inisialisasi jumlah
document.querySelector('.angka').textContent = jumlah;
